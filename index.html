<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Las Delicias de Yaya</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://i.imgur.com/voAiesl.png">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fuentes Google -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@300;400;600&family=Pacifico&display=swap" rel="stylesheet">
    
    <!-- Iconos (Phosphor Icons) -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <style>
        /* Estilos Personalizados */
        body { font-family: 'Fredoka', sans-serif; }
        .font-hand { font-family: 'Pacifico', cursive; }
        
        /* Ocultar scrollbar pero permitir scroll */
        .hide-scroll::-webkit-scrollbar { display: none; }
        .hide-scroll { -ms-overflow-style: none; scrollbar-width: none; }

        /* Animaciones */
        .fade-in { animation: fadeIn 0.5s ease-out forwards; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Utilidad para ocultar/mostrar secciones */
        .hidden-section { display: none; }
    </style>
</head>
<body class="bg-orange-50 text-gray-800 flex flex-col min-h-screen">

    <!-- HEADER / NAVBAR -->
    <nav class="bg-orange-600 text-white shadow-lg sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-4">
            <div class="flex justify-between items-center h-16">
                <!-- Logo -->
                <div class="flex items-center space-x-3 select-none">
                    <div class="w-12 h-12 bg-white rounded-full flex items-center justify-center overflow-hidden border-2 border-yellow-400 shadow-sm">
                        <img src="https://i.imgur.com/voAiesl.png" alt="Logo Las Delicias de Yaya" class="w-full h-full object-cover">
                    </div>
                    <span class="font-hand text-xl md:text-2xl font-bold leading-tight">Las Delicias de Yaya</span>
                </div>

                <!-- Desktop Menu -->
                <div class="hidden md:flex items-center space-x-8">
                    <button onclick="switchView('menu')" id="nav-menu" class="font-bold hover:text-yellow-200 transition border-b-2 border-transparent">Men√∫</button>
                    <button onclick="switchView('historia')" id="nav-historia" class="font-bold hover:text-yellow-200 transition border-b-2 border-transparent">Historia</button>
                    <button onclick="switchView('ubicacion')" id="nav-ubicacion" class="font-bold hover:text-yellow-200 transition border-b-2 border-transparent">Contacto</button>
                    
                    <button onclick="toggleCart()" class="relative bg-white text-orange-600 px-4 py-2 rounded-full font-bold hover:bg-yellow-100 transition flex items-center gap-2">
                        <i class="ph-bold ph-shopping-cart text-xl"></i>
                        <span>Pedido</span>
                        <span id="cart-badge-desktop" class="hidden absolute -top-2 -right-2 bg-red-500 text-white text-xs w-6 h-6 rounded-full flex items-center justify-center animate-bounce">0</span>
                    </button>
                </div>

                <!-- Mobile Buttons -->
                <div class="md:hidden flex items-center gap-3">
                    <button onclick="toggleCart()" class="relative text-white p-1">
                        <i class="ph-bold ph-shopping-cart text-2xl"></i>
                        <span id="cart-badge-mobile" class="hidden absolute -top-1 -right-1 bg-yellow-400 text-orange-800 text-[10px] w-4 h-4 rounded-full flex items-center justify-center font-bold">0</span>
                    </button>
                    <button onclick="toggleMobileMenu()" class="p-1">
                        <i id="mobile-menu-icon" class="ph-bold ph-list text-2xl"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile Menu Dropdown -->
        <div id="mobile-menu" class="hidden md:hidden bg-orange-700 p-4 border-t border-orange-500 shadow-xl">
            <button onclick="switchView('menu')" class="block w-full text-left py-3 text-white border-b border-orange-600 font-medium">üç¥ Ver Men√∫</button>
            <button onclick="switchView('historia')" class="block w-full text-left py-3 text-white border-b border-orange-600 font-medium">üìñ Nuestra Historia</button>
            <button onclick="switchView('ubicacion')" class="block w-full text-left py-3 text-white font-medium">üìç Contacto</button>
        </div>
    </nav>

    <!-- MAIN CONTENT -->
    <div class="flex-grow">

        <!-- VIEW: MENU -->
        <section id="view-menu" class="fade-in">
            <!-- Hero -->
            <div class="bg-orange-100 py-8 px-4 text-center relative overflow-hidden">
                <div class="relative z-10 max-w-2xl mx-auto">
                    <h1 class="font-hand text-4xl md:text-5xl text-orange-800 mb-4">Sabor Casero y Tradici√≥n</h1>
                    <p class="text-gray-700 text-lg mb-6 leading-relaxed">
                        Disfruta de los mejores fritos, panes y postres en el Oriente Antioque√±o.
                        <br>
                        <span class="font-bold text-orange-700 mt-2 block">Hechos con amor por Yaya y Salvador.</span>
                    </p>
                    <div class="inline-flex items-center gap-2 bg-white px-4 py-2 rounded-full shadow-md text-sm text-gray-600">
                        <i class="ph-fill ph-map-pin text-orange-500"></i>
                        <span>Rionegro, Antioquia (Urbanizaci√≥n Veleros)</span>
                    </div>
                </div>
            </div>

            <!-- Category Tabs (Responsive Scroll - COMPACTO) -->
            <div class="sticky top-16 z-40 bg-orange-50 pt-3 pb-2 shadow-sm">
                <!-- Contenedor con scroll horizontal suave -->
                <div class="flex justify-start md:justify-center gap-2 overflow-x-auto px-4 pb-2 hide-scroll w-full snap-x" id="category-tabs">
                    <!-- Tabs generados por JS -->
                </div>
            </div>

            <!-- Avisos Importantes (NUEVO: Grid de 3) -->
            <div class="max-w-6xl mx-auto px-4 mt-4 grid grid-cols-1 md:grid-cols-3 gap-3 animate-fade-in">
                <!-- Aviso de Encargo -->
                <div class="bg-blue-50 text-blue-800 px-4 py-3 rounded-xl flex items-center gap-3 border border-blue-100 shadow-sm">
                    <i class="ph-fill ph-clock-countdown text-2xl text-blue-600"></i>
                    <div>
                        <p class="text-sm leading-tight">Para garantizar frescura, todos nuestros productos se elaboran <strong>bajo pedido</strong>.</p>
                    </div>
                </div>

                <!-- Aviso de Pagos (NUEVO) -->
                <div class="bg-purple-50 text-purple-900 px-3 py-3 rounded-xl flex flex-col justify-center items-center border border-purple-100 shadow-sm">
                    <p class="text-xs font-bold uppercase tracking-wider mb-2 text-purple-800">Medios de Pago</p>
                    <div class="flex items-center justify-center gap-4">
                        <div class="flex flex-col items-center gap-1 group">
                            <div class="bg-white p-1.5 rounded-full shadow-sm group-hover:scale-110 transition-transform">
                                <i class="ph-fill ph-coins text-xl text-green-600"></i>
                            </div>
                            <span class="text-[10px] font-bold text-gray-600">Efectivo</span>
                        </div>
                        <div class="flex flex-col items-center gap-1 group">
                            <div class="bg-white p-1.5 rounded-full shadow-sm group-hover:scale-110 transition-transform">
                                <i class="ph-fill ph-device-mobile text-xl text-pink-600"></i>
                            </div>
                            <span class="text-[10px] font-bold text-gray-600">Nequi</span>
                        </div>
                        <div class="flex flex-col items-center gap-1 group">
                            <div class="bg-white p-1.5 rounded-full shadow-sm group-hover:scale-110 transition-transform">
                                <i class="ph-fill ph-bank text-xl text-yellow-500"></i>
                            </div>
                            <span class="text-[10px] font-bold text-gray-600">Bancolombia</span>
                        </div>
                    </div>
                </div>

                <!-- Aviso de Domicilio Gratis -->
                <div class="bg-green-50 text-green-800 px-4 py-3 rounded-xl flex items-center gap-3 border border-green-100 shadow-sm">
                    <i class="ph-fill ph-moped text-2xl text-green-600"></i>
                    <div>
                        <p class="text-sm leading-tight"><strong>¬°Domicilio GRATIS en Rionegro!</strong> <br>Por compras superiores a $150.000.</p>
                    </div>
                </div>
            </div>

            <!-- Products Grid -->
            <main class="max-w-6xl mx-auto px-4 py-6 mb-20">
                <h2 id="current-category-title" class="text-2xl md:text-3xl font-bold text-gray-800 mb-6 border-l-4 border-orange-500 pl-4 flex items-center gap-2">
                    <!-- T√≠tulo Din√°mico -->
                </h2>
                <div id="products-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Productos generados por JS -->
                </div>
            </main>
        </section>

        <!-- VIEW: HISTORIA -->
        <section id="view-historia" class="hidden-section fade-in py-12 mb-20">
            <div class="max-w-5xl mx-auto px-4">
                <h1 class="font-hand text-5xl text-orange-800 text-center mb-12">Nuestra Historia</h1>
                <div class="bg-white p-6 md:p-10 rounded-3xl shadow-xl border border-orange-100">
                    <div class="flex flex-col lg:flex-row items-start gap-10">
                        <!-- Imagen -->
                        <div class="w-full lg:w-5/12">
                            <div class="w-full h-80 md:h-96 bg-orange-100 rounded-2xl flex items-center justify-center overflow-hidden border-4 border-white shadow-md relative">
                                <img src="https://i.imgur.com/fW9gKwB.jpeg" alt="Yaya y Salvador" class="w-full h-full object-cover">
                            </div>
                            <p class="text-center text-gray-500 mt-3 text-sm italic">Madre e hijo, el coraz√≥n de nuestra cocina.</p>
                        </div>
                        
                        <!-- Texto -->
                        <div class="w-full lg:w-7/12 space-y-6">
                            <h3 class="text-2xl font-bold text-gray-800 border-b-4 border-orange-200 pb-2 inline-block">Un equipo familiar con coraz√≥n</h3>
                            
                            <p class="text-gray-700 leading-relaxed text-lg">
                                Las Delicias de Yaya es la uni√≥n del amor de una madre y la pasi√≥n de un hijo. <strong>Yaya</strong>, con sus recetas tradicionales que han deleitado a la familia por a√±os, y <strong>Salvador</strong>, con su dedicaci√≥n incansable y su magia en la panader√≠a.
                            </p>

                            <!-- Bloque Salvador -->
                            <div class="bg-orange-50 p-6 md:p-8 rounded-2xl border-l-4 border-orange-500 shadow-sm relative overflow-hidden">
                                <div class="absolute top-0 right-0 -mt-2 -mr-2 text-orange-100 opacity-50">
                                    <i class="ph-fill ph-medal text-9xl"></i>
                                </div>
                                
                                <h4 class="font-bold text-orange-800 text-xl mb-4 flex items-center gap-2 relative z-10">
                                    <i class="ph-fill ph-medal text-orange-600 text-2xl"></i>
                                    La historia de Salvador
                                </h4>
                                <p class="text-gray-700 mb-6 relative z-10 text-justify leading-relaxed">
                                    Salvador, nuestro maestro panadero, es un joven sordo que nos inspira cada d√≠a. A pesar de su discapacidad auditiva, es un joven inmensamente trabajador que encuentra su mayor alegr√≠a y realizaci√≥n entre harinas y masas. Su especialidad son los panes, los cuales prepara con una t√©cnica impecable.
                                </p>
                                
                                <div class="bg-white p-5 rounded-xl border border-orange-100 shadow-sm relative z-10">
                                    <h5 class="font-bold text-gray-800 text-base mb-3 flex items-center gap-2">
                                        <i class="ph-fill ph-book-open text-orange-500"></i>
                                        Formaci√≥n y Superaci√≥n
                                    </h5>
                                    <ul class="text-gray-700 space-y-3 list-disc list-inside">
                                        <li>Ha participado en cursos de panader√≠a y pasteler√≠a por la Alcald√≠a.</li>
                                        <li>Participa en emprendimientos en Fundaci√≥n Makia.</li>
                                        <li>Estudia lengua de se√±as Colombiana en Fundaci√≥n Makia para comunicarse mejor con el mundo.</li>
                                        <li>Actualmente est√° culminando su bachillerato en <strong>Parasistemas</strong>, aqu√≠ en Rionegro.</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- VIEW: UBICACI√ìN -->
        <section id="view-ubicacion" class="hidden-section fade-in py-12 mb-20">
            <div class="max-w-5xl mx-auto px-4">
                <h1 class="font-hand text-5xl text-orange-800 text-center mb-6">Contacto y Ubicaci√≥n</h1>
                <p class="text-center text-gray-600 mb-12 max-w-2xl mx-auto">Estamos ubicados estrat√©gicamente para llevarte el mejor sabor. ¬°Escr√≠benos o vis√≠tanos!</p>
                <div class="grid md:grid-cols-2 gap-8 items-start">
                    <div class="w-full h-[300px] md:h-[500px] bg-gray-200 rounded-3xl overflow-hidden shadow-xl border-4 border-white">
                        <iframe src="https://maps.google.com/maps?q=Urbanizaci%C3%B3n+Veleros,+Rionegro,+Antioquia&t=&z=16&ie=UTF8&iwloc=&output=embed" width="100%" height="100%" frameborder="0" style="border:0" allowfullscreen></iframe>
                    </div>
                    <div class="space-y-6">
                        <div class="p-8 rounded-3xl bg-white shadow-lg border border-orange-100">
                            <h3 class="font-bold text-2xl text-orange-800 mb-4 flex items-center gap-3">
                                <i class="ph-fill ph-map-pin text-orange-600 text-2xl"></i>
                                Sede Principal
                            </h3>
                            <div class="space-y-2 text-gray-700">
                                <p class="font-bold text-lg">Calle 51 # 60-14, torre 1 apto. 502</p>
                                <p class="font-medium text-gray-600">Urbanizaci√≥n Veleros</p>
                                <p>Rionegro, Antioquia</p>
                                <p class="text-sm text-gray-500">Colombia</p>
                            </div>
                            <div class="mt-6 pt-6 border-t border-gray-100">
                                <h4 class="font-bold text-gray-800 mb-3 flex items-center gap-2">
                                    <i class="ph-fill ph-truck text-orange-500 text-xl"></i>
                                    Zonas de Despacho
                                </h4>
                                <ul class="space-y-3">
                                    <li class="flex items-center gap-2 text-gray-600 bg-orange-50 p-2 rounded-lg"><span class="w-2 h-2 bg-green-500 rounded-full"></span> Rionegro (Urbano)</li>
                                    <li class="flex items-center gap-2 text-gray-600 bg-gray-50 p-2 rounded-lg"><span class="w-2 h-2 bg-yellow-500 rounded-full"></span> Marinilla (Previa Coordinaci√≥n)</li>
                                    <li class="flex items-center gap-2 text-gray-600 bg-gray-50 p-2 rounded-lg"><span class="w-2 h-2 bg-yellow-500 rounded-full"></span> Guarne (Previa Coordinaci√≥n)</li>
                                </ul>
                            </div>
                        </div>

                        <!-- Card de Redes Sociales -->
                        <div class="p-8 rounded-3xl bg-white shadow-lg border border-orange-100">
                            <h3 class="font-bold text-2xl text-orange-800 mb-4 flex items-center gap-3">
                                <i class="ph-fill ph-users-three text-orange-600 text-2xl"></i>
                                Nuestras Redes
                            </h3>
                            <p class="text-gray-600 mb-6 text-sm">¬°S√≠guenos para conocer nuestras promociones, eventos y nuevos productos!</p>
                            <div class="grid grid-cols-2 gap-4">
                                <!-- WhatsApp -->
                                <a href="https://wa.me/573104394742" target="_blank" class="flex flex-col items-center gap-2 group p-3 rounded-xl hover:bg-green-50 transition-colors border border-transparent hover:border-green-100">
                                    <div class="w-12 h-12 rounded-full bg-green-100 flex items-center justify-center text-green-600 group-hover:bg-green-500 group-hover:text-white transition-all shadow-sm">
                                        <i class="ph-fill ph-whatsapp-logo text-3xl"></i>
                                    </div>
                                    <span class="text-sm font-bold text-gray-700">WhatsApp</span>
                                </a>
                                <!-- Instagram -->
                                <a href="https://www.instagram.com/lasdeliciasdeyaya2026?igsh=MWtkazJuanhrOXg1ZQ==" target="_blank" class="flex flex-col items-center gap-2 group p-3 rounded-xl hover:bg-pink-50 transition-colors border border-transparent hover:border-pink-100">
                                    <div class="w-12 h-12 rounded-full bg-pink-100 flex items-center justify-center text-pink-600 group-hover:bg-pink-500 group-hover:text-white transition-all shadow-sm">
                                        <i class="ph-fill ph-instagram-logo text-3xl"></i>
                                    </div>
                                    <span class="text-sm font-bold text-gray-700">Instagram</span>
                                </a>
                                <!-- Facebook -->
                                <a href="https://www.facebook.com/share/1EEzbQGLox/" target="_blank" class="flex flex-col items-center gap-2 group p-3 rounded-xl hover:bg-blue-50 transition-colors border border-transparent hover:border-blue-100">
                                    <div class="w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 group-hover:bg-blue-600 group-hover:text-white transition-all shadow-sm">
                                        <i class="ph-fill ph-facebook-logo text-3xl"></i>
                                    </div>
                                    <span class="text-sm font-bold text-gray-700">Facebook</span>
                                </a>
                                <!-- TikTok -->
                                <a href="https://www.tiktok.com/@lasdeliciasdeyaya" target="_blank" class="flex flex-col items-center gap-2 group p-3 rounded-xl hover:bg-gray-100 transition-colors border border-transparent hover:border-gray-200">
                                    <div class="w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center text-gray-800 group-hover:bg-gray-900 group-hover:text-white transition-all shadow-sm">
                                        <i class="ph-fill ph-tiktok-logo text-3xl"></i>
                                    </div>
                                    <span class="text-sm font-bold text-gray-700">TikTok</span>
                                </a>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </section>

    </div>

    <!-- FOOTER (Actualizado 24/02/2026) -->
    <footer class="bg-gray-900 text-gray-400 py-10 text-sm pb-24 md:pb-10 border-t-4 border-orange-600">
        <div class="max-w-6xl mx-auto px-4 flex flex-col md:flex-row justify-between items-center gap-8">
            <div class="text-center md:text-left">
                <h4 class="text-white font-bold text-xl font-hand mb-2">Las Delicias de Yaya</h4>
                <p class="mb-1">¬© 2026 Todos los derechos reservados.</p>
                <p class="text-xs text-gray-500">Rionegro, Antioquia</p>
                <p class="text-xs text-gray-600 mt-2 italic">√öltima actualizaci√≥n: 24/02/2026 09:14 PM</p>
                
                <!-- Contador de Visitas -->
                <div class="mt-4 flex justify-center md:justify-start" title="N√∫mero de personas que han visitado la p√°gina">
                    <img src="https://api.visitorbadge.io/api/visitors?path=lasdeliciasdeyaya.web&label=Visitas&labelColor=%234b5563&countColor=%23ea580c" alt="Contador de visitas" class="shadow-sm rounded-md" />
                </div>
            </div>
            <div class="flex flex-col items-center md:items-end gap-3 bg-gray-800 p-4 rounded-xl border border-gray-700 shadow-lg">
                <div class="flex items-center gap-2 text-orange-400 font-bold uppercase tracking-wider text-xs">
                    <i class="ph-bold ph-code"></i>
                    <span>Desarrollado por Xavier Rojas</span>
                </div>
                <div class="flex flex-col md:flex-row gap-4 text-gray-300 text-center md:text-right">
                    <a href="https://wa.me/573202882534" class="hover:text-green-400 transition flex items-center justify-center gap-1.5 group">
                        <i class="ph-fill ph-whatsapp-logo group-hover:scale-110 transition-transform"></i> 
                        320 288 2534
                    </a>
                    <a href="mailto:xavierrojas16@gmail.com" class="hover:text-blue-400 transition flex items-center justify-center gap-1.5 group">
                        <i class="ph-fill ph-envelope-simple group-hover:scale-110 transition-transform"></i>
                        xavierrojas16@gmail.com
                    </a>
                </div>
                <p class="text-gray-500 text-xs mt-1 border-t border-gray-700 pt-2 w-full text-center md:text-right">
                    üöÄ Creaci√≥n de p√°ginas web y apps a tu medida
                </p>
            </div>
        </div>
    </footer>

    <!-- CART MODAL -->
    <div id="cart-modal" class="fixed inset-0 z-50 flex justify-end hidden">
        <div class="absolute inset-0 bg-black bg-opacity-50 transition-opacity backdrop-blur-sm" onclick="toggleCart()"></div>
        <div class="relative w-full max-w-md bg-white h-full shadow-2xl flex flex-col transform transition-transform animate-fade-in">
            <div class="bg-orange-600 p-4 text-white flex justify-between items-center shadow-md">
                <h2 class="font-bold text-lg flex items-center gap-2"><i class="ph-bold ph-shopping-cart"></i> Tu Pedido</h2>
                <button onclick="toggleCart()" class="hover:bg-orange-700 p-1 rounded"><i class="ph-bold ph-x text-2xl"></i></button>
            </div>
            
            <!-- Items del carrito -->
            <div id="cart-items" class="flex-1 overflow-y-auto p-4 space-y-4">
                <!-- Se llena con JS -->
            </div>

            <!-- Footer del Carrito con Formulario -->
            <div class="border-t p-6 bg-gray-50">
                
                <!-- Formulario de Datos (Solo visible si hay items) -->
                <div id="cart-form" class="mb-4 space-y-3 hidden">
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-1">Tu Nombre:</label>
                        <input type="text" id="customer-name" class="w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-orange-500 outline-none text-sm" placeholder="Ej. Juan P√©rez">
                    </div>
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-1">Ubicaci√≥n / Lugar de entrega:</label>
                        <input type="text" id="customer-location" class="w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-orange-500 outline-none text-sm" placeholder="Ej. Ingeproductos, Rionegro, Marinilla...">
                    </div>
                </div>

                <div class="flex justify-between items-center mb-4 text-xl font-bold text-gray-800">
                    <span>Total:</span>
                    <span id="cart-total">$0</span>
                </div>
                
                <!-- Mensaje de Error Visual -->
                <p id="form-error" class="text-red-500 text-sm font-bold mb-3 hidden text-center animate-pulse flex items-center justify-center gap-1">
                    <i class="ph-bold ph-warning"></i> Por favor completa tu nombre y ubicaci√≥n.
                </p>

                <button onclick="sendOrder()" id="btn-whatsapp-order" class="w-full bg-gray-300 text-gray-500 cursor-not-allowed py-4 rounded-xl font-bold text-lg flex items-center justify-center gap-2 shadow-lg transition-all" disabled>
                    <i class="ph-bold ph-whatsapp-logo text-xl"></i> Haz tu pedido por WhatsApp
                </button>
            </div>
        </div>
    </div>

    <!-- FLOATING BUTTONS -->
    <div class="fixed bottom-6 left-6 z-40">
        <button onclick="openWhatsAppContact()" class="bg-green-500 text-white p-3 md:p-4 rounded-full shadow-2xl flex items-center gap-2 hover:bg-green-600 transition hover:scale-110 group">
            <i class="ph-bold ph-whatsapp-logo text-2xl group-hover:rotate-12 transition-transform"></i>
            <span class="hidden md:inline font-bold">Cont√°ctanos</span>
        </button>
    </div>

    <div id="floating-cart-btn" class="fixed bottom-6 right-6 z-40 animate-bounce hidden">
        <button onclick="toggleCart()" class="bg-orange-600 text-white p-3 md:p-4 rounded-full shadow-2xl flex items-center gap-2 hover:bg-orange-700 transition">
            <span class="font-bold hidden md:inline">Ver Pedido</span>
            <div id="cart-float-badge" class="bg-white text-orange-600 w-6 h-6 rounded-full flex items-center justify-center font-bold text-xs">0</div>
        </button>
    </div>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --- DATOS ---
        const productsData = [
            // FRITOS
            { 
                id: 1, 
                category: 'Fritos', 
                name: 'Empanada de Pabell√≥n', 
                price: 6000, 
                desc: 'Harina de ma√≠z, rellena de: carne desmechada, tajada, caraota y queso coste√±o.',
                image: 'https://i.imgur.com/ERA75ld.jpeg'
            },
            { 
                id: 2, 
                category: 'Fritos', 
                name: 'Empanada de Pollo', 
                price: 3000, 
                desc: 'Harina de ma√≠z, relleno con pollo desmechado.',
                image: 'https://i.imgur.com/UZbMsY8.jpeg'
            },
            { 
                id: 3, 
                category: 'Fritos', 
                name: 'Empanada Carne Mechada', 
                price: 4000, 
                desc: 'Harina de ma√≠z, relleno de carne desmechada.',
                image: 'https://i.imgur.com/wgRS229.jpeg'
            },
            { 
                id: 4, 
                category: 'Fritos', 
                name: 'Arepa de Huevo Mixta', 
                price: 6000, 
                desc: 'Harina de ma√≠z, relleno con huevo, carne molida o desmechada y pollo desmechado.',
                image: 'https://i.imgur.com/D8imLjM.jpeg'
            },
            { 
                id: 5, 
                category: 'Fritos', 
                name: 'Tequeyoyo', 
                price: 4000, 
                desc: '¬º de pl√°tano maduro, palito de queso coste√±o, jam√≥n de cerdo, envuelto con masa de harina de trigo.',
                image: 'https://i.imgur.com/9Pxbb8t.jpeg'
            },
            { 
                id: 6, 
                category: 'Fritos', 
                name: 'Palitos de Queso (Teque√±os)', 
                price: 2800, 
                desc: 'Dedito de queso, envuelto con masa de harina de trigo. Sabores: queso coste√±o, queso coste√±o con bocadillo.',
                image: 'https://i.imgur.com/NAo46VZ.jpeg'
            },
            { 
                id: 7, 
                category: 'Fritos', 
                name: 'Arepa Reina Pepiada', 
                price: 10000, 
                desc: '(Arepa asada) Harina de ma√≠z, rellena de pollo desmechado, una salsa de aguacate triturado, mayonesa, con un toque de lim√≥n y cebolla y una porci√≥n de aguacate.',
                image: 'https://i.imgur.com/EHUDfHg.jpeg'
            },
            { 
                id: 8, 
                category: 'Fritos', 
                name: 'Arepa La Peluda', 
                price: 12000, 
                desc: '(Arepa asada) Harina de ma√≠z, rellena de carne desmechada y queso coste√±o.',
                image: 'https://i.imgur.com/FGpgEVZ.jpeg'
            },
            { 
                id: 9, 
                category: 'Fritos', 
                name: 'Arepa La Catira', 
                price: 10000, 
                desc: '(Arepa asada) Harina de ma√≠z, rellena de pollo desmechado y queso coste√±o.',
                image: 'https://i.imgur.com/EnzWUb6.jpeg'
            },
            { 
                id: 10, 
                category: 'Fritos', 
                name: 'Arepa Cabimera de Carne Mechada', 
                price: 16000, 
                desc: '(Arepa frita) Harina de ma√≠z, carne desmechada, lechuga, tomate, cebolla, aguacate, huevo, queso coste√±o, mayonesa, salsa de tomate, mostaza y salsa t√°rtara aparte.',
                image: 'https://i.imgur.com/EbxXSqw.jpeg'
            },
            { 
                id: 31, 
                category: 'Fritos', 
                name: 'Arepa Cabimera de Pollo', 
                price: 13000, 
                desc: '(Arepa frita) Harina de ma√≠z, pollo desmechado, lechuga, tomate, cebolla, aguacate, huevo, queso coste√±o, mayonesa, salsa de tomate, mostaza y salsa t√°rtara aparte.',
                image: 'https://i.imgur.com/EbxXSqw.jpeg'
            },
            { 
                id: 11, 
                category: 'Fritos', 
                name: 'Patac√≥n de Pollo', 
                price: 13000, 
                desc: '1 pl√°tano pint√≥n o verde, pollo desmechado, lechuga, tomate, cebolla, aguacate, huevo, queso coste√±o, mayonesa, salsa de tomate, mostaza y salsa t√°rtara aparte.',
                image: 'https://i.imgur.com/TiY0SPq.jpeg'
            },
            { 
                id: 12, 
                category: 'Fritos', 
                name: 'Patac√≥n de Carne Mechada', 
                price: 15000, 
                desc: '1 pl√°tano pint√≥n o verde, carne desmechada, lechuga, tomate, cebolla, aguacate, huevo, queso coste√±o, mayonesa, salsa de tomate, mostaza y salsa t√°rtara aparte.',
                image: 'https://i.imgur.com/TiY0SPq.jpeg'
            },
            { 
                id: 13, 
                category: 'Fritos', 
                name: 'Patac√≥n Mixto', 
                price: 18000, 
                desc: '1 pl√°tano pint√≥n o verde, carne desmechada y pollo desmechado, lechuga, tomate, cebolla, aguacate, huevo, queso coste√±o, mayonesa, salsa de tomate, mostaza y salsa t√°rtara aparte.',
                image: 'https://i.imgur.com/yruMuTX.jpeg'
            },
            { 
                id: 14, 
                category: 'Fritos', 
                name: 'Palitos de Queso (Teque√±os) Congelados (x10)', 
                price: 15000, 
                desc: 'Masa de harina de trigo con: queso coste√±o o queso coste√±o y bocadillo.',
                image: 'https://i.imgur.com/YDFjw3t.jpeg'
            },
            { 
                id: 45, 
                category: 'Fritos', 
                name: 'Palitos de Queso (Teque√±os) para Fiesta (M√≠nimo 20)', 
                price: 1300, 
                desc: 'Masa de harina de trigo rellena con queso coste√±o. (Precio por unidad)', 
                image: 'https://i.imgur.com/z3hj88g.jpeg' 
            },
            { 
                id: 46, 
                category: 'Fritos', 
                name: 'Mini Empanadas para Fiesta (M√≠nimo 20)', 
                price: 1500, 
                desc: 'Masa de harina de trigo rellena con pollo desmechado. (Precio por unidad)', 
                image: 'https://i.imgur.com/XzXxDri.jpeg' 
            },
            { 
                id: 47, 
                category: 'Fritos', 
                name: 'Mini Pizzas para Fiesta (M√≠nimo 20)', 
                price: 1300, 
                desc: 'Masa de harina de trigo con salsa de pizza, queso mozarrella y jam√≥n de cerdo. (Precio por unidad)', 
                image: 'https://i.imgur.com/FcQ3j4D.jpeg' 
            },
            { 
                id: 50, 
                category: 'Fritos', 
                name: 'Salsa de Ajo (200ml)', 
                price: 13000, 
                desc: 'Mayonesa, ajo, cebolla blanca y cilantro.', 
                image: 'https://i.imgur.com/htUSCke.jpeg' 
            },

            // PANADERIA
            { 
                id: 15, 
                category: 'Panaderia', 
                name: 'Rosc√≥n Grande de Guayaba', 
                price: 16000, 
                desc: 'Pan en forma de rosca relleno de mermelada de guayaba. Aprox. 700 gr.', 
                image: 'https://i.imgur.com/SC9HXvV.jpeg' 
            },
            { 
                id: 16, 
                category: 'Panaderia', 
                name: 'Rosc√≥n Grande de Guayaba y Queso', 
                price: 18000, 
                desc: 'Pan en forma de rosca relleno de mermelada de guayaba y queso coste√±o. Aprox. 800 gr.', 
                image: 'https://i.imgur.com/SC9HXvV.jpeg' 
            },
            { 
                id: 17, 
                category: 'Panaderia', 
                name: 'Rosc√≥n Grande de Arequipe', 
                price: 18000, 
                desc: 'Pan en forma de rosca relleno de Arequipe. Aprox. 700 gr.', 
                image: 'https://i.imgur.com/BOJj8xO.jpeg' 
            },
            { 
                id: 18, 
                category: 'Panaderia', 
                name: 'Rosc√≥n Grande de Arequipe y Queso', 
                price: 20000, 
                desc: 'Pan en forma de rosca relleno de Arequipe y queso coste√±o. Aprox. 700 gr.', 
                image: 'https://i.imgur.com/h9aS1sY.jpeg' 
            },
            { 
                id: 32, 
                category: 'Panaderia', 
                name: 'Rosc√≥n Mediano de Guayaba', 
                price: 12000, 
                desc: 'Pan en forma de rosca relleno de mermelada de guayaba. Aprox. 350 gr.', 
                image: 'https://i.imgur.com/h9aS1sY.jpeg' 
            },
            { 
                id: 33, 
                category: 'Panaderia', 
                name: 'Rosc√≥n Mediano de Guayaba y Queso', 
                price: 14000, 
                desc: 'Pan en forma de rosca relleno de mermelada de guayaba y queso coste√±o. Aprox. 450 gr.', 
                image: 'https://i.imgur.com/h9aS1sY.jpeg' 
            },
            { 
                id: 34, 
                category: 'Panaderia', 
                name: 'Rosc√≥n Mediano de Arequipe', 
                price: 13000, 
                desc: 'Pan en forma de rosca relleno de Arequipe. Aprox. 350 gr.', 
                image: 'https://i.imgur.com/h9aS1sY.jpeg' 
            },
            { 
                id: 35, 
                category: 'Panaderia', 
                name: 'Rosc√≥n Mediano de Arequipe y Queso', 
                price: 15000, 
                desc: 'Pan en forma de rosca relleno de Arequipe y queso coste√±o. Aprox. 450 gr.', 
                image: 'https://i.imgur.com/h9aS1sY.jpeg' 
            },
            { 
                id: 19, 
                category: 'Panaderia', 
                name: 'Panecillos de Guayaba (x5)', 
                price: 10000, 
                desc: 'Pan relleno de guayaba aprox. 90 gr. Cada pan.', 
                image: 'https://i.imgur.com/OAaSuE9.jpeg' 
            },
            { 
                id: 20, 
                category: 'Panaderia', 
                name: 'Panecillos de Arequipe (x5)', 
                price: 13000, 
                desc: 'Pan relleno de arequipe aprox. 90 gr. Cada pan.', 
                image: 'https://i.imgur.com/fJ3SjYV.jpeg' 
            },
            { 
                id: 21, 
                category: 'Panaderia', 
                name: 'Cachitos de Jam√≥n y Queso (x5)', 
                price: 13000, 
                desc: 'Pan relleno de jam√≥n y queso, aprox. 120 gr.', 
                image: 'https://i.imgur.com/gp6L4TJ.jpeg' 
            },
            { 
                id: 23, 
                category: 'Panaderia', 
                name: 'Mini Pizzas Jam√≥n y Queso (x10)', 
                price: 15000, 
                desc: 'Masa de harina de trigo cubierta con salsa de pizza, jam√≥n y queso mozarrella.', 
                image: 'https://i.imgur.com/3ucgBaa.jpeg' 
            },
            { 
                id: 24, 
                category: 'Panaderia', 
                name: 'Panet√≥n de Chocolate o Frutas', 
                price: 13000, 
                desc: 'Masa de Paneton envuelta con chips de chocolate o frutas confitadas.', 
                image: 'https://i.imgur.com/9zsIF1X.jpeg' 
            },
            { 
                id: 25, 
                category: 'Panaderia', 
                name: 'Pan con Chispas y Arequipe', 
                price: 14000, 
                desc: 'Masa de pan envuelta con chips de chocolate, relleno con arequipe.', 
                image: 'https://i.imgur.com/3XxQKTo.jpeg' 
            },
            { 
                id: 36, 
                category: 'Panaderia', 
                name: 'Pan de Jam√≥n Grande', 
                price: 40000, 
                desc: 'Masa de pan, relleno de jam√≥n, tocineta, uvas pasas y aceitunas, aprox. 800 gr.', 
                image: 'https://i.imgur.com/J5XreT2.jpeg' 
            },
            { 
                id: 37, 
                category: 'Panaderia', 
                name: 'Pan de Jam√≥n Mediano', 
                price: 20000, 
                desc: 'Masa de pan, relleno de jam√≥n, tocineta, uvas pasas y aceitunas, aprox. 400 gr.', 
                image: 'https://i.imgur.com/TK43HnB.jpeg' 
            },
            { 
                id: 48, 
                category: 'Panaderia', 
                name: 'Pan Tipo Subway', 
                price: 4000, 
                desc: 'Elaborado con masa de pan con queso coste√±o y or√©gano, peso aproximado 160 gramos.', 
                image: 'https://i.imgur.com/XOsRYZd.jpeg' 
            },

            // POSTRES
            { 
                id: 26, 
                category: 'Postres', 
                name: 'Quesillo (Leche asada)', 
                price: 10000, 
                desc: 'Huevo, az√∫car, leche en polvo, lecherita, vainilla y ron.', 
                image: 'https://i.imgur.com/n2QusKC.jpeg' 
            },
            { 
                id: 27, 
                category: 'Postres', 
                name: 'Torta 3 Leches (Porci√≥n)', 
                price: 10000, 
                desc: 'Biscocho con harina de trigo, huevo y az√∫car, relleno con, leche condensada, crema de leche, leche evaporada decorada con crema de Chantilly y cereza', 
                image: 'https://i.imgur.com/Wo0RgmR.jpeg' 
            },
            { 
                id: 38, 
                category: 'Postres', 
                name: 'Torta Imposible', 
                price: 10000, 
                desc: 'Mitad Quesillo y mitad torta de vainilla o chocolate.', 
                image: 'https://i.imgur.com/NypFXAw.jpeg' 
            },
            { 
                id: 39, 
                category: 'Postres', 
                name: 'Torta 3 Leches Completa', 
                price: 120000, 
                desc: 'Biscocho con harina de trigo, huevo y az√∫car, relleno con, leche condensada, crema de leche, leche evaporada decorada con crema de Chantilly y frutas varias.', 
                image: 'https://i.imgur.com/zuvnGTI.jpeg' 
            },
            { 
                id: 49, 
                category: 'Postres', 
                name: 'Torta Beso de √Ångel', 
                price: 10000, 
                desc: 'Torta 3 leches rellena de quesillo.', 
                image: 'https://i.imgur.com/o2g36HF.png' 
            },
            { 
                id: 28, 
                category: 'Postres', 
                name: 'Torta de Chocolate (Porci√≥n)', 
                price: 10000, 
                desc: 'Biscocho de chocolate, relleno de crema pastelera de chocolate, decorado con Chantilly de chocolate.', 
                image: 'https://i.imgur.com/3I3JLiD.jpeg' 
            },
            { 
                id: 40, 
                category: 'Postres', 
                name: 'Torta Marquesa (Porci√≥n)', 
                price: 10000, 
                desc: 'Galletas dulce, con crema pastelera de chocolate decorada con Chantilly de chocolate.', 
                image: 'https://i.imgur.com/TbX2sSn.jpeg' 
            },
            { 
                id: 29, 
                category: 'Postres', 
                name: 'Cupcake con Chantilly (x6)', 
                price: 15000, 
                desc: 'Biscocho decorado con crema Chantilly.', 
                image: 'https://i.imgur.com/7nQfS4F.jpeg' 
            },
            { 
                id: 30, 
                category: 'Postres', 
                name: 'Minidonas con Chocolate (x10)', 
                price: 15000, 
                desc: 'Masa de harina de trigo, huevo, az√∫car y leche, decoradas con cobertura de chocolate negro o blanco y lluvia de colores.', 
                image: 'https://i.imgur.com/q7euCET.jpeg' 
            },
            { 
                id: 41, 
                category: 'Postres', 
                name: 'Minidonas por Unidad Empacadas (M√≠nimo 20)', 
                price: 2000, 
                desc: 'Masa de harina de trigo, huevo, az√∫car y leche, decoradas con cobertura de chocolate negro o blanco y lluvia de colores, envueltas en bolsa de polipropileno y lazo.', 
                image: 'https://i.imgur.com/f7reak6.jpeg' 
            },
            { 
                id: 42, 
                category: 'Postres', 
                name: 'Bombones de Chocolate (Bandeja x 6 unidades)', 
                price: 10000, 
                desc: 'Cobertura de chocolate de leche dulce.', 
                image: 'https://i.imgur.com/Hw2htqM.jpeg' 
            },
            { 
                id: 43, 
                category: 'Postres', 
                name: 'Chupeta de Chocolate (Bandeja x4)', 
                price: 10000, 
                desc: 'Cobertura de chocolate de leche dulce.', 
                image: 'https://i.imgur.com/q8JjXc9.jpeg' 
            },
            { 
                id: 44, 
                category: 'Postres', 
                name: 'Fresa en Bandeja x5 Unidades', 
                price: 12000, 
                desc: 'Fresas cubiertas con chocolate negro y blanco.', 
                image: 'https://i.imgur.com/rsS1rPE.jpeg' 
            }
        ];

        // --- ESTADO ---
        let cart = [];
        let activeCategory = 'Fritos';
        const categories = ['Fritos', 'Panaderia', 'Postres'];

        // --- FUNCIONES DE FORMATO ---
        const formatPrice = (price) => {
            return new Intl.NumberFormat('es-CO', {
                style: 'currency',
                currency: 'COP',
                minimumFractionDigits: 0
            }).format(price);
        };

        const getCategoryIcon = (cat) => {
            switch(cat) {
                case 'Fritos': return "üî•";
                case 'Panaderia': return "ü•ñ";
                case 'Postres': return "üç∞";
                default: return "üçΩÔ∏è";
            }
        };

        // --- RENDERIZADO ---
        
        // 1. Renderizar Pesta√±as de Categor√≠a (MODIFICADO PARA M√ìVIL)
        function renderCategoryTabs() {
            const container = document.getElementById('category-tabs');
            container.innerHTML = categories.map(cat => `
                <button onclick="setCategory('${cat}')" 
                    class="flex items-center gap-1.5 px-4 py-2 rounded-full font-bold text-sm md:text-base whitespace-nowrap transition-all flex-shrink-0 snap-center
                    ${activeCategory === cat ? 'bg-orange-600 text-white shadow-lg ring-2 ring-orange-300 transform scale-105' : 'bg-white text-gray-600 border border-gray-200 hover:bg-orange-100'}">
                    <span class="text-lg md:text-xl">${getCategoryIcon(cat)}</span>
                    ${cat}
                </button>
            `).join('') + '<div class="w-2 md:hidden flex-shrink-0"></div>'; 
        }

        // 2. Renderizar Productos
        function renderProducts() {
            const container = document.getElementById('products-grid');
            const titleContainer = document.getElementById('current-category-title');
            
            // Actualizar T√≠tulo
            titleContainer.innerHTML = `<span class="text-3xl animate-bounce">${getCategoryIcon(activeCategory)}</span> ${activeCategory}`;

            // Filtrar y Crear HTML
            const filteredProducts = productsData.filter(p => p.category === activeCategory);
            
            container.innerHTML = filteredProducts.map(product => {
                // L√≥gica para mostrar IMAGEN REAL si existe, o ICONO si no
                let imageContent;
                if (product.image) {
                    imageContent = `<img src="${product.image}" alt="${product.name}" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500">`;
                } else {
                    imageContent = `<div class="text-5xl opacity-30 select-none group-hover:scale-110 transition-transform duration-500">${getCategoryIcon(product.category)}</div>`;
                }

                return `
                <div class="bg-white rounded-2xl shadow-md overflow-hidden hover:shadow-xl transition-all duration-300 border border-orange-100 flex flex-col h-full group">
                    <div class="h-48 bg-orange-200 relative flex items-center justify-center overflow-hidden">
                        ${imageContent}
                        <div class="absolute bottom-3 right-3 bg-white px-3 py-1 rounded-full font-bold text-orange-800 shadow-sm text-sm">
                            ${formatPrice(product.price)}
                        </div>
                    </div>
                    <div class="p-5 flex-grow flex flex-col justify-between">
                        <div>
                            <h3 class="font-bold text-xl text-gray-800 mb-2 select-none">${product.name}</h3>
                            <p class="text-gray-600 text-sm mb-4 select-none">${product.desc}</p>
                        </div>
                        <button onclick="addToCart(${product.id})" class="w-full bg-orange-100 text-orange-700 font-bold py-2 rounded-xl hover:bg-orange-600 hover:text-white transition-colors flex items-center justify-center gap-2 mt-2 active:scale-95 transform">
                            <i class="ph-bold ph-plus"></i> Agregar
                        </button>
                    </div>
                </div>
            `}).join('');
        }

        // 3. Renderizar Carrito
        function renderCart() {
            const container = document.getElementById('cart-items');
            const totalContainer = document.getElementById('cart-total');
            const orderBtn = document.getElementById('btn-whatsapp-order');
            const cartForm = document.getElementById('cart-form');
            const formError = document.getElementById('form-error');
            
            // Badges
            const count = cart.reduce((acc, item) => acc + item.quantity, 0);
            const total = cart.reduce((acc, item) => acc + (item.price * item.quantity), 0);
            
            updateBadges(count);

            if (cart.length === 0) {
                cartForm.classList.add('hidden'); 
                formError.classList.add('hidden'); // Ocultar error si vacio
                container.innerHTML = `
                    <div class="text-center text-gray-500 mt-10">
                        <i class="ph-duotone ph-shopping-cart text-6xl mb-4 text-orange-200"></i>
                        <p class="font-bold text-gray-600">Tu canasta est√° vac√≠a.</p>
                        <p class="text-sm mt-1">¬°Agrega algunas delicias!</p>
                        <button onclick="toggleCart()" class="mt-6 bg-orange-100 text-orange-700 px-6 py-2 rounded-full font-bold hover:bg-orange-200 transition">Ver Men√∫</button>
                    </div>`;
                totalContainer.innerText = "$0";
                orderBtn.disabled = true;
                orderBtn.classList.add('bg-gray-300', 'text-gray-500', 'cursor-not-allowed');
                orderBtn.classList.remove('bg-green-500', 'text-white', 'hover:bg-green-600', 'hover:shadow-xl');
                
                // Ocultar flotante si vac√≠o
                document.getElementById('floating-cart-btn').classList.add('hidden');
            } else {
                cartForm.classList.remove('hidden'); 
                container.innerHTML = cart.map(item => `
                    <div class="flex justify-between items-center bg-gray-50 p-3 rounded-lg border border-gray-100 shadow-sm">
                        <div>
                            <h4 class="font-bold text-gray-800 text-sm md:text-base">${item.name}</h4>
                            <p class="text-orange-600 font-medium text-sm">${formatPrice(item.price)}</p>
                        </div>
                        <div class="flex items-center gap-3">
                            <div class="flex items-center bg-white rounded-lg border border-gray-200 shadow-sm">
                                <button onclick="updateQuantity(${item.id}, -1)" class="px-2 py-1 hover:bg-gray-100 text-gray-600 rounded-l-lg"><i class="ph-bold ph-minus"></i></button>
                                <span class="w-8 text-center font-bold text-sm select-none">${item.quantity}</span>
                                <button onclick="updateQuantity(${item.id}, 1)" class="px-2 py-1 hover:bg-gray-100 text-gray-600 rounded-r-lg"><i class="ph-bold ph-plus"></i></button>
                            </div>
                            <button onclick="removeFromCart(${item.id})" class="text-red-400 hover:text-red-600 p-1"><i class="ph-bold ph-trash text-lg"></i></button>
                        </div>
                    </div>
                `).join('');
                
                totalContainer.innerText = formatPrice(total);
                orderBtn.disabled = false;
                orderBtn.classList.remove('bg-gray-300', 'text-gray-500', 'cursor-not-allowed');
                orderBtn.classList.add('bg-green-500', 'text-white', 'hover:bg-green-600', 'hover:shadow-xl');
                
                // Mostrar flotante si cerrado
                const modal = document.getElementById('cart-modal');
                if (modal.classList.contains('hidden')) {
                     document.getElementById('floating-cart-btn').classList.remove('hidden');
                }
            }
        }

        function updateBadges(count) {
            const badges = [
                document.getElementById('cart-badge-desktop'),
                document.getElementById('cart-badge-mobile'),
                document.getElementById('cart-float-badge')
            ];
            
            badges.forEach(badge => {
                if (badge) {
                    badge.innerText = count;
                    if (count > 0 && badge.id !== 'cart-float-badge') {
                        badge.classList.remove('hidden');
                    } else if (count === 0 && badge.id !== 'cart-float-badge') {
                        badge.classList.add('hidden');
                    }
                }
            });
        }

        // --- L√ìGICA DE NEGOCIO ---

        function setCategory(cat) {
            activeCategory = cat;
            renderCategoryTabs();
            renderProducts();
        }

        function addToCart(id) {
            const product = productsData.find(p => p.id === id);
            const existing = cart.find(item => item.id === id);
            
            if (existing) {
                existing.quantity++;
            } else {
                cart.push({ ...product, quantity: 1 });
            }
            renderCart();
        }

        function removeFromCart(id) {
            cart = cart.filter(item => item.id !== id);
            renderCart();
        }

        function updateQuantity(id, delta) {
            const item = cart.find(i => i.id === id);
            if (item) {
                const newQty = item.quantity + delta;
                if (newQty > 0) {
                    item.quantity = newQty;
                }
                renderCart();
            }
        }

        function toggleCart() {
            const modal = document.getElementById('cart-modal');
            const floatBtn = document.getElementById('floating-cart-btn');
            const formError = document.getElementById('form-error');
            
            // Limpiar errores al abrir/cerrar
            if (!modal.classList.contains('hidden')) {
                formError.classList.add('hidden');
            }

            if (modal.classList.contains('hidden')) {
                modal.classList.remove('hidden');
                floatBtn.classList.add('hidden');
            } else {
                modal.classList.add('hidden');
                if (cart.length > 0) floatBtn.classList.remove('hidden');
            }
        }

        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            const icon = document.getElementById('mobile-menu-icon');
            
            if (menu.classList.contains('hidden')) {
                menu.classList.remove('hidden');
                icon.classList.remove('ph-list');
                icon.classList.add('ph-x');
            } else {
                menu.classList.add('hidden');
                icon.classList.remove('ph-x');
                icon.classList.add('ph-list');
            }
        }

        function switchView(viewName) {
            // Ocultar todas las vistas
            ['menu', 'historia', 'ubicacion'].forEach(v => {
                document.getElementById('view-' + v).classList.add('hidden-section');
                document.getElementById('nav-' + v)?.classList.remove('text-yellow-200', 'border-yellow-200'); // Reset desktop style
                document.getElementById('nav-' + v)?.classList.add('border-transparent');
            });

            // Mostrar vista actual
            document.getElementById('view-' + viewName).classList.remove('hidden-section');
            
            // Estilo nav activo
            const navBtn = document.getElementById('nav-' + viewName);
            if(navBtn) {
                navBtn.classList.add('text-yellow-200', 'border-yellow-200');
                navBtn.classList.remove('border-transparent');
            }

            // Cerrar men√∫ m√≥vil si est√° abierto
            document.getElementById('mobile-menu').classList.add('hidden');
            document.getElementById('mobile-menu-icon').classList.remove('ph-x');
            document.getElementById('mobile-menu-icon').classList.add('ph-list');

            window.scrollTo(0, 0);
        }

        function sendOrder() {
            if (cart.length === 0) return;

            // Obtener valores de los inputs
            const nameInput = document.getElementById('customer-name');
            const locationInput = document.getElementById('customer-location');
            const formError = document.getElementById('form-error');
            
            const name = nameInput.value.trim();
            const location = locationInput.value.trim();

            // Validaci√≥n visual (SIN ALERT)
            if (!name || !location) {
                formError.classList.remove('hidden'); // Mostrar mensaje rojo
                
                // Resaltar bordes en rojo si est√°n vac√≠os
                if(!name) nameInput.classList.add('border-red-500', 'ring-1', 'ring-red-500');
                if(!location) locationInput.classList.add('border-red-500', 'ring-1', 'ring-red-500');
                
                // Remover estilos de error cuando el usuario escriba
                nameInput.addEventListener('input', () => {
                    nameInput.classList.remove('border-red-500', 'ring-1', 'ring-red-500');
                    if(locationInput.value.trim()) formError.classList.add('hidden');
                });
                locationInput.addEventListener('input', () => {
                    locationInput.classList.remove('border-red-500', 'ring-1', 'ring-red-500');
                    if(nameInput.value.trim()) formError.classList.add('hidden');
                });

                return; // Detener env√≠o
            }

            let message = "¬°Hola! üëã Quiero hacer un pedido en Las Delicias de Yaya:\n\n";
            
            // Agregar datos del cliente
            message += `üë§ *Cliente:* ${name}\n`;
            message += `üìç *Ubicaci√≥n:* ${location}\n\n`;
            message += "*Pedido:*\n";

            let total = 0;
            
            cart.forEach(item => {
                message += `‚ñ™Ô∏è ${item.quantity}x ${item.name} - ${formatPrice(item.price * item.quantity)}\n`;
                total += item.price * item.quantity;
            });
            
            message += `\n*Total a Pagar: ${formatPrice(total)}*`;
            message += `\n\nüìç Quedo atento para coordinar el env√≠o.`;

            const whatsappUrl = `https://wa.me/573104394742?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
        }

        function openWhatsAppContact() {
            const whatsappUrl = `https://wa.me/573104394742?text=${encodeURIComponent("Hola, quisiera hacer una consulta sobre Las Delicias de Yaya.")}`;
            window.open(whatsappUrl, '_blank');
        }

        // --- INICIALIZACI√ìN ---
        document.addEventListener('DOMContentLoaded', () => {
            renderCategoryTabs();
            renderProducts();
            renderCart();
            switchView('menu'); // Vista inicial
        });

    </script>
</body>
</html>
